<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="aq.dao.goods.SpecDao">

    <!--查询规格表-->
    <select id="selectSpec" resultType="java.util.Map" parameterType="java.util.Map">
        SELECT
        XSM.ID AS id,
        XSM.GROU_NAME AS grouName,
        XSM.SPEC_NAME AS specName,
        XSM.TIPS_TYPE AS tipsType,
        XSM.TIPS_TEXT AS tipsText,
        XSM.TIPS_IMG AS tipsImg,
        XSM.PX AS px,
        XSM.PARAMETER AS parameter,
        XSM.REMARKS AS remarks,
        XSM.CREATE_USER AS createUserId,
        cu.NICK_NAME AS createUserName,
        XSM.LAST_CREATE_USER AS lastCreateUserId,
        lcu.NICK_NAME AS lastCreateUserName,
        DATE_FORMAT(
        XSM.CREATE_TIME,
        '%Y-%m-%d %H:%i:%S'
        ) AS createTime,
        DATE_FORMAT(
        XSM.LAST_CREATE_TIME,
        '%Y-%m-%d %H:%i:%S'
        ) AS lastCreateTime
        FROM
        XH_SPEC_MAIN XSM
        LEFT JOIN system_administrator cu ON cu.ID = XSM.CREATE_USER
        LEFT JOIN system_administrator lcu ON lcu.ID = XSM.LAST_CREATE_USER
        WHERE 1=1
        <if test="id != null">
            AND XSM.ID = #{id}
        </if>
    </select>

    <!--新增规格-->
    <insert id="insertSpec" >
        INSERT INTO XH_SPEC_MAIN
        VALUES(#{id},
        #{group_name},
        #{spec_name},
        #{tip_type},
        #{tips_text},
        #{tips_img},
        #{px},
        #{parameter},
        #{remarks},
        #{obligate},
        #{obligate1},
        #{obligate2},
        #{createUser},
        #{createTime,jdbcType=TIMESTAMP},
        #{lastCreateUser},
        #{lastCreateTime,jdbcType=TIMESTAMP})
    </insert>


    <!--更新品牌-->
    <update id="updateSpec" parameterType="java.util.Map">
        UPDATE XH_SPEC_MAIN XB
        <trim prefix="set" suffixOverrides=",">
            <if test="group_name!=null and group_name != ''">
                XB.GROU_NAME = #{group_name},
            </if>
            <if test="spec_name!=null and spec_name != ''">
                XB.SPEC_NAME = #{spec_name},
            </if>
            <if test="tip_type!=null and tip_type != ''">
                XB.TIPS_TYPE = #{tip_type},
            </if>
            <if test="tips_text!=null and tips_text != ''">
                XB.TIPS_TEXT = #{tips_text},
            </if>
            <if test="tips_img!=null and tips_img != ''">
                XB.TIPS_IMG = #{tips_img},
            </if>
            <if test="parameter!=null and parameter != ''">
                XB.PARAMETER = #{parameter},
            </if>
            <if test="updateTime!=null and updateTime != ''">
                XB.LAST_CREATE_TIME = #{updateTime,jdbcType=TIMESTAMP},
            </if>
            <if test="lastCreateUser!=null and lastCreateUser != ''">
                XB.LAST_CREATE_USER = #{lastCreateUser},
            </if>
        </trim>
        WHERE XB.ID = #{id}
    </update>



    <!--删除商品品牌-->
    <delete id="deleteSpec"  parameterType="java.util.Map" >
        DELETE FROM XH_SPEC_MAIN WHERE ID = #{id}
    </delete>
</mapper>