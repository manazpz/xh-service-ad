webpackJsonp([10],{"94JO":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("BO1k"),n=a.n(i),l=a("woOf"),s=a.n(l),o=a("qsHl"),r=a("cAgV"),c=a("IcnI"),p={name:"brandBacklist",inject:["reload"],directives:{waves:r.a},data:function(){return{tableKey:0,list:null,total:null,listLoading:!0,fileList:[],file:[],tip_typeListOptions:[{tipsType:"01",name:"文字"},{tipsType:"02",name:"图片"}],falg:!0,params:null,listQuery:{id:void 0,name:"",pageNum:1,pageSize:10,sort:"lastCreateTime DESC"},sortOptions:[{label:"时间正序",key:"lastCreateTime ASC"},{label:"时间倒序",key:"lastCreateTime DESC"}],temp:{id:void 0,grouName:"",specName:"",tipsType:"",px:"",remarks:""},dialogStatus:"",dialogFormVisible:!1,textMap:{update:"Edit",create:"Create"},rule:{name:[{required:!0,message:"品牌名称不能为空",trigger:"change"}],official:[{required:!0,message:"品牌网址不能为空",trigger:"change"}]}}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.listLoading=!0,Object(o.j)(this.listQuery).then(function(t){50001===t.code&&c.a.dispatch("GetRefreshToken").then(function(){e.getList()}),200===t.code&&(e.list=t.data.items,e.total=t.data.total,e.list.forEach(function(e){"01"===e.tipsType?e.tipsType="文字":e.tipsType="图片"}),setTimeout(function(){e.listLoading=!1},1500))}).catch(function(){e.listLoading=!1})},handleSelectionChange:function(){},handleFilter:function(){this.listQuery.pageNum=1,this.getList()},handleSizeChange:function(e){this.listQuery.pageSize=e,this.getList()},handleCurrentChange:function(e){this.listQuery.pageNum=e,this.getList()},handdle:function(e){this.falg?this.$router.push({path:"specBackValueList",query:{id:e.id}}):this.falg=!0},handleDeleteSpec:function(e,t){var a=this;this.falg=!1,this.$confirm("您确定删除吗？").then(function(i){a.listLoading=!0;var n={id:e.id};Object(o.h)(n).then(function(i){50001===i.code&&c.a.dispatch("GetRefreshToken").then(function(){a.handleModifyStatus(e,t)}),200===i.code&&(a.reload(),a.listLoading=!1,a.dialogFormVisible=!1,a.$message({message:"操作成功",type:"success"}),e.del=t)}).catch(function(){a.listLoading=!1,a.falg=!0})}).catch(function(e){})},resetTemp:function(){this.temp={id:void 0,grouName:"",specName:"",tipsType:"",px:"",remarks:""}},handleCreate:function(){var e=this;this.resetTemp(),this.dialogStatus="新增规格",this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs.dataForm.clearValidate()})},createData:function(){var e=this;this.$refs.dataForm.validate(function(t){t&&(e.listLoading=!0,Object(o.d)(e.temp).then(function(t){50001===t.code&&c.a.dispatch("GetRefreshToken").then(function(){e.createData()}),200===t.code&&(e.reload(),e.dialogFormVisible=!1,e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}))}))})},handleUpdateSpec:function(e){var t=this;this.falg=!1,"文字"===e.tipsType?e.tipsType="01":e.tipsType="02",this.temp=s()({},e),this.dialogStatus="编辑规格",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.dataForm.clearValidate()})},updateData:function(){var e=this;this.$refs.dataForm.validate(function(t){t&&(e.listLoading=!0,Object(o.o)(e.temp).then(function(t){if(50001===t.code&&c.a.dispatch("GetRefreshToken").then(function(){e.updateData()}),200===t.code){e.reload();var a=!0,i=!1,l=void 0;try{for(var s,o=n()(e.list);!(a=(s=o.next()).done);a=!0){var r=s.value;if(r.id===e.temp.id){var p=e.list.indexOf(r);e.list.splice(p,1,e.temp);break}}}catch(e){i=!0,l=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw l}}e.listLoading=!1,e.dialogFormVisible=!1,e.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3})}}))})}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"分组名称",clearable:""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleFilter(t)}},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}}),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("\n      "+e._s(e.$t("table.search"))+"\n    ")]),e._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleCreate}},[e._v(e._s(e.$t("table.add"))+"\n    ")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%","min-height":"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange,"row-click":e.handdle}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"序号",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.$index+1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"分组名称","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.grouName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"规格组名称","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.specName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"规格排序","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.px))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"提示类型","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.tipsType))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":"120","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(a){e.handleUpdateSpec(t.row)}}},[e._v("修改规格")]),e._v(" "),a("el-button",{attrs:{type:"danger",plain:""},on:{click:function(a){e.handleDeleteSpec(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"","current-page":e.listQuery.pageNum,"page-sizes":[10,20,30,50],"page-size":e.listQuery.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:e.rule,model:e.temp,"label-position":"left","label-width":"70px"}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"110px",label:"分组名称",prop:"grouName"}},[a("el-input",{attrs:{required:"",placeholder:"请输入分组名称"},model:{value:e.temp.grouName,callback:function(t){e.$set(e.temp,"grouName",t)},expression:"temp.grouName"}})],1),e._v(" "),a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"110px",label:"规格组名称",prop:"specName"}},[a("el-input",{attrs:{required:"",placeholder:"请输入规格组名称"},model:{value:e.temp.specName,callback:function(t){e.$set(e.temp,"specName",t)},expression:"temp.specName"}})],1),e._v(" "),a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"110px",label:"规格排序",prop:"px"}},[a("el-input",{attrs:{required:"",placeholder:"请输入规格排序"},model:{value:e.temp.px,callback:function(t){e.$set(e.temp,"px",t)},expression:"temp.px"}})],1),e._v(" "),a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"110px",label:"提示类型",prop:"tipsType"}},[a("el-radio-group",{model:{value:e.temp.tipsType,callback:function(t){e.$set(e.temp,"tipsType",t)},expression:"temp.tipsType"}},e._l(e.tip_typeListOptions,function(t){return a("el-radio",{attrs:{label:t.tipsType}},[e._v(e._s(t.name))])}))],1),e._v(" "),a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"110px",label:"规格备注"}},[a("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入规格备注"},model:{value:e.temp.remarks,callback:function(t){e.$set(e.temp,"remarks",t)},expression:"temp.remarks"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(e._s(e.$t("table.cancel")))]),e._v(" "),"新增规格"==e.dialogStatus?a("el-button",{attrs:{type:"primary"},on:{click:e.createData}},[e._v(e._s(e.$t("table.confirm")))]):a("el-button",{attrs:{type:"primary"},on:{click:e.updateData}},[e._v(e._s(e.$t("table.confirm")))])],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(p,d,!1,function(e){a("h4KZ")},null,null);t.default=u.exports},h4KZ:function(e,t,a){var i=a("u2/k");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("fc834558",i,!0)},"u2/k":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409EFF;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n}\n.avatar {\n  width: 178px;\n  height: 178px;\n  display: block;\n}\n",""])}});