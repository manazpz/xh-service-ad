webpackJsonp([2],{"+0uB":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("rI3w"),i={name:"step1",model:{prop:"classify",event:"classify"},props:{classify:""},data:function(){return{preStep:!0,nextStep:!1,publish:!1,classifyCascades1:this.classify?this.classify.history.classifyCascades1:[],classifyCascades2:this.classify?this.classify.history.classifyCascades2:[],classifyCascades3:this.classify?this.classify.history.classifyCascades3:[],isShow2:!!this.classify&&this.classify.history.isShow2,isShow3:!!this.classify&&this.classify.history.isShow3,getIndex1:this.classify?this.classify.history.getIndex1:-1,getIndex2:this.classify?this.classify.history.getIndex2:-1,getIndex3:this.classify?this.classify.history.getIndex3:-1,step:1,text:this.classify?this.classify.history.text:""}},created:function(){this.getClassifyCascade()},methods:{getClassifyCascade:function(){var t=this;this.classifyCascades1.length<1&&Object(a.c)().then(function(e){t.classifyCascades1=e.data.items})},handlePreStep:function(){this.step--,this.goStep(this.step)},handleNextStep:function(){this.step++,this.goStep(this.step)},handlePublish:function(){console.log("发布")},goStep:function(t){switch(t){case 1:this.preStep=!1,this.nextStep=!0,this.publish=!1;break;case 2:this.preStep=!0,this.nextStep=!0,this.publish=!1;break;case 3:this.preStep=!0,this.nextStep=!1,this.publish=!0}},selectHeadStyle:function(t){t.row,t.column,t.rowIndex,t.columnIndex;return{color:"rgb(250, 195, 100","font-size":"18px","text-align":"center"}},tableRowClassName:function(t){var e=t.row,s=t.rowIndex;e.index=s},selectedHighlight1:function(t){t.row;var e=t.rowIndex;if(this.getIndex1===e)return{"background-color":"rgb(250, 195, 100)"}},selectedHighlight2:function(t){t.row;var e=t.rowIndex;if(this.getIndex2===e)return{"background-color":"rgb(250, 195, 100)"}},selectedHighlight3:function(t){t.row;var e=t.rowIndex;if(this.getIndex3===e)return{"background-color":"rgb(250, 195, 100)"}},rowClick1:function(t){t.children.length>0?this.isShow2=!0:(this.isShow2=!1,this.isShow3=!1,this.getIndex2=-1,this.getIndex3=-1),this.text=t.name,this.getIndex1=t.index,this.classifyCascades2=t.children,this.$emit("classify","")},rowClick2:function(t){t.children.length>0?this.isShow3=!0:(this.isShow3=!1,this.getIndex3=-1),this.text=this.text.split(">")[0]+" > "+t.name,this.getIndex2=t.index,this.classifyCascades3=t.children,this.$emit("classify","")},sendHistoryData:function(t){t.history={},t.history.isShow2=this.isShow2,t.history.isShow3=this.isShow3,t.history.classifyCascades1=this.classifyCascades1,t.history.classifyCascades2=this.classifyCascades2,t.history.classifyCascades3=this.classifyCascades3,t.history.getIndex1=this.getIndex1,t.history.getIndex2=this.getIndex2,t.history.getIndex3=this.getIndex3,t.history.text=this.text},rowClick3:function(t){this.Index3=t.index,this.text=this.text.split(">")[0]+" > "+this.text.split(">")[1]+" > "+t.name,this.getIndex3=t.index,this.sendHistoryData(t),this.$emit("classify",t)}}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"step1"},[s("el-row",{attrs:{gutter:24}},[s("el-col",{attrs:{span:8}},[s("el-card",[s("el-table",{key:0,attrs:{data:t.classifyCascades1,"row-class-name":t.tableRowClassName,"row-style":t.selectedHighlight1,"header-cell-style":t.selectHeadStyle},on:{"row-click":t.rowClick1}},[s("el-table-column",{attrs:{label:"一级分类"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.name))])]}}])})],1)],1)],1),t._v(" "),t.isShow2?s("el-col",{attrs:{span:8}},[s("el-card",[s("el-table",{attrs:{data:t.classifyCascades2,"row-class-name":t.tableRowClassName,"row-style":t.selectedHighlight2,"header-cell-style":t.selectHeadStyle},on:{"row-click":t.rowClick2}},[s("el-table-column",{attrs:{label:"二级分类"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.name))])]}}])})],1)],1)],1):t._e(),t._v(" "),t.isShow3?s("el-col",{attrs:{span:8}},[s("el-card",[s("el-table",{attrs:{data:t.classifyCascades3,"row-class-name":t.tableRowClassName,"row-style":t.selectedHighlight3,"header-cell-style":t.selectHeadStyle},on:{"row-click":t.rowClick3}},[s("el-table-column",{attrs:{label:"三级分类"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.name))])]}}])})],1)],1)],1):t._e()],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("div",{staticStyle:{background:"#FFF8DC",padding:"10px"}},[s("span",[t._v("您当前选择的商品类别是： "+t._s(t.text))])])])],1)],1)},staticRenderFns:[]},l=s("VU/8")(i,n,!1,null,null,null).exports,o=s("vMJZ"),r={name:"UEditor",model:{prop:"info",event:"info"},props:{id:{type:String},config:{type:Object},info:""},data:function(){return{editor:null}},mounted:function(){this.editor=window.UE.getEditor(this.id,this.config);var t=this;this.editor.addListener("blur",function(){t.$emit("info",t.editor.getContent())})},destoryed:function(){this.editor.destory()},methods:{getUEContent:function(){return this.editor.getContent()}}},c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("script",{attrs:{id:this.id,type:"text/plain"}})])},staticRenderFns:[]},d={name:"step1",components:{Ueditor:s("VU/8")(r,c,!1,null,null,null).exports},model:{prop:"info",event:"info"},props:{info:""},data:function(){return{tableKey:0,goodsId:"",listLoading:!0,activeName:"first",brands:[],units:[],fileList:[],u1:"u1"+new Date,u2:"u2"+new Date,classifySpecs:[],spanArr:[],checkedCities:[],pos:0,temp:this.info.info?this.info.info:{id:void 0,model:"01",logistcs:"01",name:"",code:"",brandId:"",banPrice:"",unit:"UP",stock:"0",specParameter:[],parameter:"",detail:""},config1:{autoHeightEnabled:!1,autoFloatEnabled:!0,initialContent:'<table class="tm-tableAttr" width="789"><thead style="margin: 0px; padding: 0px; background-color: rgb(238, 238, 238); border-bottom: 1px solid rgb(228, 228, 228); font-weight: 700; font-size: 14px; color: rgb(153, 153, 153);"><tr style="margin: 0px; padding: 0px;" class="firstRow"><td colspan="2" style="margin: 0px; padding-right: 5px; padding-left: 20px; border-bottom-color: rgb(229, 229, 229);">[键入标题]</td></tr></thead><tbody style="margin: 0px; padding: 0px;"><tr class="tm-tableAttrSub" style="margin: 0px; padding: 0px;"><th colspan="2" style="margin: 0px; padding-right: 5px; padding-left: 20px; text-align: left; width: 763px; border-top-color: rgb(229, 229, 229); border-right-color: rgb(229, 229, 229);">[键入分组名]</th></tr><tr style="margin: 0px; padding: 0px;"><th style="margin: 0px; padding-right: 5px; padding-left: 20px; color: rgb(153, 153, 153); font-weight: 400; text-align: right; width: 147px; border-top-color: rgb(247, 247, 247); border-right-color: rgb(247, 247, 247);"><p></p><p>&nbsp; &nbsp; &nbsp;【参数名】</p></th><td style="margin: 0px; padding-right: 5px; padding-left: 5px; border-top-color: rgb(247, 247, 247);">【参数值】</td></tr></tbody></table>',autoClearinitialContent:!1,initialFrameWidth:null,initialFrameHeight:450,BaseUrl:""},config2:{autoHeightEnabled:!1,autoFloatEnabled:!0,initialContent:"",autoClearinitialContent:!1,initialFrameWidth:null,initialFrameHeight:450,BaseUrl:""}}},mounted:function(){window.onbeforeunload=function(t){return(t=t||window.event)&&(t.returnValue="关闭提示"),"关闭提示"}},created:function(){this.info.data=this.temp,this.info.data.specParameter.length>0&&this.getSpanArr(this.info.data.specParameter),this.getBrands(),this.getUnits(),this.getClassifySpecParam()},methods:{getBrands:function(){var t=this;this.brands.length<1&&Object(a.b)().then(function(e){t.brands=e.data.items})},getUnits:function(){var t=this;this.brands.length<1&&Object(o.d)({type:"'UNIT'"}).then(function(e){t.units=e.data.items})},getClassifySpecParam:function(){var t=this;this.classifySpecs.length<1&&Object(a.d)(this.info.classify.id).then(function(e){if(t.classifySpecs=e.data.items,t.info.data.specParameter.length>0)for(var s=t.info.data.specParameter,a=0;a<s.length;a++)for(var i=0;i<t.classifySpecs.length;i++)for(var n=t.classifySpecs[i].param,l=0;l<n.length;l++)s[a].spec_value_name===n[l].spec_value_name&&s[a].spec_sort===n[l].spec_sort&&t.checkedCities.push(n[l]);t.listLoading=!1})},handleCheckAllChange:function(t){t.sort(function(t,e){return t.px-e.px}),this.temp.specParameter=t,this.getSpanArr(this.temp.specParameter)},getSpanArr:function(t){this.spanArr=[];for(var e=0;e<t.length;e++)0===e?(this.spanArr.push(1),this.pos=0):t[e].name===t[e-1].name?(this.spanArr[this.pos]+=1,this.spanArr.push(0)):(this.spanArr.push(1),this.pos=e)},objectSpanMethod:function(t){t.row,t.column;var e=t.rowIndex;if(0===t.columnIndex){var s=this.spanArr[e];return{rowspan:s,colspan:s>0?1:0}}},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type,s=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),s||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&s},handlePictureCardSuccess:function(t,e,s){},handleRemove:function(t,e){}}},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"step2"},[s("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"基本信息",name:"first"}},[s("div",[s("el-row",{attrs:{gutter:2}},[s("el-col",{attrs:{span:4,align:"middle"}},[s("div",{staticClass:"col-content bg-purple-col"},[s("label",[t._v("基本信息")])])]),t._v(" "),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"col-content bg-purple-col"},[s("el-form",{ref:"dataForm",staticStyle:{"margin-left":"50px"},attrs:{model:t.temp,"label-width":"110px"}},[s("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"商品品类："}},[s("label",[t._v(t._s(t.info.classify.history.text))])]),t._v(" "),s("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"商品分类："}},[s("el-select",{attrs:{placeholder:"请选择分组"},model:{value:t.temp.model,callback:function(e){t.$set(t.temp,"model",e)},expression:"temp.model"}},[s("el-option",{key:"01",attrs:{label:"新机",value:"01"}}),t._v(" "),s("el-option",{key:"02",attrs:{label:"旧机",value:"02"}})],1)],1),t._v(" "),s("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"商品品牌："}},[s("el-select",{attrs:{filterable:"",placeholder:"请选择品牌"},model:{value:t.temp.brandId,callback:function(e){t.$set(t.temp,"brandId",e)},expression:"temp.brandId"}},t._l(t.brands,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1)],1)])],1),t._v(" "),s("el-row",{attrs:{gutter:2}},[s("el-col",{attrs:{span:4,align:"middle"}},[s("div",{staticClass:"col-content bg-purple-col"},[s("label",[t._v("商品信息")])])]),t._v(" "),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"col-content bg-purple-col"},[s("el-form",{ref:"dataForm",staticStyle:{"margin-left":"50px"},attrs:{model:t.temp,"label-width":"110px"}},[s("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"商品名称："}},[s("el-input",{staticStyle:{width:"200px"},model:{value:t.temp.name,callback:function(e){t.$set(t.temp,"name",e)},expression:"temp.name"}})],1),t._v(" "),s("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"商品编号："}},[s("el-input",{staticStyle:{width:"200px"},model:{value:t.temp.code,callback:function(e){t.$set(t.temp,"code",e)},expression:"temp.code"}})],1),t._v(" "),s("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"基准价格："}},[s("el-input",{staticStyle:{width:"200px"},model:{value:t.temp.banPrice,callback:function(e){t.$set(t.temp,"banPrice",e)},expression:"temp.banPrice"}})],1),t._v(" "),s("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"单位："}},[s("el-select",{attrs:{placeholder:"请选择品牌"},model:{value:t.temp.unit,callback:function(e){t.$set(t.temp,"unit",e)},expression:"temp.unit"}},t._l(t.units,function(t){return s("el-option",{key:t.keyWord,attrs:{label:t.name,value:t.keyWord}})}))],1),t._v(" "),s("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"库存："}},[s("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!!t.info.info},model:{value:t.temp.stock,callback:function(e){t.$set(t.temp,"stock",e)},expression:"temp.stock"}})],1),t._v(" "),s("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"邮递类型："}},[s("el-select",{attrs:{placeholder:"请选择分组"},model:{value:t.temp.logistcs,callback:function(e){t.$set(t.temp,"logistcs",e)},expression:"temp.logistcs"}},[s("el-option",{key:"01",attrs:{label:"卖家承担运费",value:"01"}}),t._v(" "),s("el-option",{key:"02",attrs:{label:"买家承担运费",value:"02"}})],1)],1),t._v(" "),s("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"上传商品图片："}},[s("el-upload",{attrs:{multiple:"",action:"https://jsonplaceholder.typicode.com/posts/","list-type":"picture-card","before-upload":t.beforeAvatarUpload,"file-list":t.fileList,"on-success":t.handlePictureCardSuccess,"on-remove":t.handleRemove}},[s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"请上传jpg/png格式,不大于2M的图片",placement:"bottom"}},[s("i",{staticClass:"el-icon-plus"})])],1)],1)],1)],1)])],1),t._v(" "),s("el-row",{attrs:{gutter:2}},[s("el-col",{attrs:{span:4,align:"middle"}},[s("div",{staticClass:"col-content bg-purple-col"},[s("label",[t._v("商品规格")])])]),t._v(" "),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"col-content bg-purple-col"},[s("el-form",{ref:"dataForm",staticStyle:{"margin-left":"50px"},attrs:{model:t.temp,"label-width":"110px"}},[s("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"选定规格："}},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"97%",height:"100%"},attrs:{data:t.classifySpecs,border:"",fit:"","highlight-current-row":"","header-cell-style":{background:"#c0c0c0"}}},[s("el-table-column",{attrs:{align:"center",label:"规格组",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.name))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"参数","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-checkbox-group",{on:{change:t.handleCheckAllChange},model:{value:t.checkedCities,callback:function(e){t.checkedCities=e},expression:"checkedCities"}},t._l(e.row.param,function(e){return s("el-checkbox",{key:e.spec_sort,attrs:{label:e}},[t._v(t._s(e.spec_value_name))])}))]}}])})],1)],1),t._v(" "),s("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"设置规格："}},[s("el-input",{staticStyle:{width:"97%"},attrs:{prepend:"基准价格：",disabled:!0},model:{value:t.temp.banPrice,callback:function(e){t.$set(t.temp,"banPrice",e)},expression:"temp.banPrice"}},[s("template",{slot:"prepend"},[t._v("基准价格:")])],2),t._v(" "),s("el-table",{key:t.tableKey,staticStyle:{width:"97%",height:"100%"},attrs:{data:t.temp.specParameter,border:"",fit:"","highlight-current-row":"","span-method":t.objectSpanMethod,"header-cell-style":{background:"#c0c0c0"}}},[s("el-table-column",{attrs:{align:"center",label:"规格组",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                          "+t._s(e.row.name)+"\n                        ")]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",label:"规格值","min-width":"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                          "+t._s(e.row.spec_value_name)+"\n                        ")]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",label:"修正值",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-input",{model:{value:e.row.correntPrice,callback:function(s){t.$set(e.row,"correntPrice",s)},expression:"scope.row.correntPrice"}})]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",label:"保底总价",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-input",{model:{value:e.row.minPrice,callback:function(s){t.$set(e.row,"minPrice",s)},expression:"scope.row.minPrice"}})]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",label:"封顶总价",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-input",{model:{value:e.row.cappedPrice,callback:function(s){t.$set(e.row,"cappedPrice",s)},expression:"scope.row.cappedPrice"}})]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",label:"提示类型",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.row.tipsType,callback:function(s){t.$set(e.row,"tipsType",s)},expression:"scope.row.tipsType"}},[s("el-option",{key:"01",attrs:{label:"不提示",value:"01"}}),t._v(" "),s("el-option",{key:"02",attrs:{label:"文本",value:"02"}}),t._v(" "),s("el-option",{key:"03",attrs:{label:"图片",value:"02"}}),t._v(" "),s("el-option",{key:"04",attrs:{label:"上图下文",value:"02"}})],1)]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",label:"提示文字",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-input",{model:{value:e.row.tipsText,callback:function(s){t.$set(e.row,"tipsText",s)},expression:"scope.row.tipsText"}})]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",label:"提示图片",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-upload",{attrs:{action:"https://jsonplaceholder.typicode.com/posts/","before-upload":t.beforeAvatarUpload,"on-success":t.handlePictureCardSuccess,"on-remove":t.handleRemove}},[s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"请上传jpg/png格式,不大于2M的图片",placement:"bottom"}},[s("el-button",{attrs:{size:"mini",type:"primary"}},[t._v("上传图片")])],1)],1)]}}])})],1)],1)],1)],1)])],1)],1)]),t._v(" "),s("el-tab-pane",{attrs:{label:"商品参数",name:"second"}},[s("div",[s("Ueditor",{ref:"ueditor1",attrs:{id:t.u1,config:t.config1},model:{value:t.temp.parameter,callback:function(e){t.$set(t.temp,"parameter",e)},expression:"temp.parameter"}})],1)]),t._v(" "),s("el-tab-pane",{attrs:{label:"商品详情",name:"three"}},[s("div",[s("Ueditor",{ref:"ueditor2",attrs:{id:t.u2,config:t.config2},model:{value:t.temp.detail,callback:function(e){t.$set(t.temp,"detail",e)},expression:"temp.detail"}})],1)])],1)],1)},staticRenderFns:[]};var h=s("VU/8")(d,p,!1,function(t){s("eB4P")},null,null).exports,u=s("MOmO"),f=s.n(u),m={name:"page401",inject:["reload"],data:function(){return{errGif:f.a+"?"+ +new Date}},methods:{refresh:function(){this.reload()}}},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"errPage-container"},[s("el-row",[s("el-col",{attrs:{span:12}},[s("h1",{staticClass:"text-jumbo text-ginormous"},[t._v("发布完成!")]),t._v(" "),s("ul",{staticClass:"list-unstyled"},[s("li",[t._v("或者你可以去:")]),t._v(" "),s("li",{staticClass:"link-type"},[s("router-link",{attrs:{to:"/dashboard"}},[t._v("回首页")])],1),t._v(" "),s("li",{staticClass:"link-type"},[s("router-link",{attrs:{to:"/bf/gm/warehouseGoodsList"}},[t._v("进入商品仓库")])],1),t._v(" "),s("li",[s("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.refresh(e)}}},[t._v("发布新商品")])])])]),t._v(" "),s("el-col",{attrs:{span:12}},[s("img",{attrs:{src:t.errGif,width:"313",height:"428",alt:"Girl has dropped her ice cream."}})])],1)],1)},staticRenderFns:[]};var b=s("VU/8")(m,g,!1,function(t){s("WdJ0")},"data-v-1bb323c8",null).exports,v=s("IcnI"),y={name:"editGoods",data:function(){return{goodsId:"",preStep:!1,nextStep:!0,publish:!1,loading:!1,test:"",step:1,temp:{id:void 0,classify:void 0,detail:void 0,info:void 0}}},components:{step1:l,step2:h,step3:b},watch:{$route:function(t,e){"/bf/gm/editGoods"===t.path&&t.query.goodsId!==this.goodsId&&(this.goodsId=t.query.goodsId,this.initdata())}},created:function(){"/bf/gm/editGoods"===this.$route.path&&this.$route.query.goodsId!==this.goodsId&&(this.goodsId=this.$route.query.goodsId,this.initdata())},methods:{initdata:function(){""!==this.goodsId&&void 0!==this.goodsId&&(this.step=0,this.getGoodsClassifyCascade())},getGoodsClassifyCascade:function(){var t=this;Object(a.e)(this.goodsId).then(function(e){t.temp.classify=e.data,t.getGoods()})},getGoods:function(){var t=this;Object(a.g)({id:this.goodsId}).then(function(e){if(50001===e.code&&v.a.dispatch("GetRefreshToken").then(function(){t.getGoods()}),200===e.code&&e.data.items.length>0){var s=e.data.items[0];s.stock=s.useableStock,t.temp.detail=s,t.step=2,t.goStep(t.step)}})},handlePreStep:function(){var t=this;this.$confirm("此操作将丢失当前页数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.step--,t.goStep(t.step)})},handleNextStep:function(){""!==this.temp.classify||1!==this.step?(this.step++,this.goStep(this.step)):this.$message.error("三级分类不能为空!")},handlePublish:function(){var t=this;this.loading=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),Object(a.i)(this.temp.info).then(function(e){50001===e.code&&v.a.dispatch("GetRefreshToken").then(function(){t.handlePublish()}),200===e.code&&setTimeout(function(){t.loading.close(),t.step++,t.goStep(t.step)},1500)}).catch(function(){t.loading.close()})},goStep:function(t){switch(t){case 1:this.preStep=!1,this.nextStep=!0,this.publish=!1;break;case 2:this.temp.info={},this.temp.info.classify=this.temp.classify,void 0!==this.temp.detail&&(this.temp.info.info=this.frmatData(this.temp.detail)),this.preStep=!0,this.nextStep=!1,this.publish=!0;break;case 3:this.preStep=!1,this.nextStep=!1,this.publish=!1}},frmatData:function(t){var e={},s=[];e.id=t.id,e.model=t.model,e.logistcs=t.logistcs,e.name=t.name,e.code=t.code,e.brandId=t.brandId,e.banPrice=t.banPrice,e.unit=t.unit,e.stock=t.stock;for(var a=0;a<t.specParameter.length;a++)for(var i=t.specParameter[a].id,n=t.specParameter[a].name,l=t.specParameter[a].px,o=t.specParameter[a].parameter,r=0;r<o.length;r++)o[r].id=i,o[r].spec_value_name=o[r].name,o[r].name=n,o[r].spec_sort=o[r].value,o[r].px=l,s.push(o[r]);return e.specParameter=s,e.parameter=t.parameter,e.detail=t.detail,e}}},x={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-steps",{staticStyle:{"margin-top":"10px"},attrs:{"align-center":"",active:t.step}},[s("el-step",{attrs:{title:"选择商品品类",description:""}}),t._v(" "),s("el-step",{attrs:{title:"编辑基本信息",description:""}}),t._v(" "),s("el-step",{attrs:{title:"完成",description:""}})],1),t._v(" "),s("el-form",{ref:"dataForm",staticClass:"from-content bg-from",attrs:{model:t.temp,"label-width":"100px"}},[1===t.step?s("step1",{model:{value:t.temp.classify,callback:function(e){t.$set(t.temp,"classify",e)},expression:"temp.classify"}}):t._e(),t._v(" "),2===t.step?s("step2",{model:{value:t.temp.info,callback:function(e){t.$set(t.temp,"info",e)},expression:"temp.info"}}):t._e(),t._v(" "),3===t.step?s("step3"):t._e()],1),t._v(" "),s("div",{staticClass:"but-group",staticStyle:{float:"right","margin-right":"10px"}},[s("el-button",{directives:[{name:"show",rawName:"v-show",value:t.preStep,expression:"preStep"}],nativeOn:{click:function(e){e.preventDefault(),t.handlePreStep(e)}}},[t._v("上一步")]),t._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:t.nextStep,expression:"nextStep"}],attrs:{type:"primary"},nativeOn:{click:function(e){e.preventDefault(),t.handleNextStep(e)}}},[t._v("下一步")]),t._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:t.publish,expression:"publish"}],attrs:{type:"primary"},nativeOn:{click:function(e){e.preventDefault(),t.handlePublish(e)}}},[t._v("发布商品")])],1)],1)},staticRenderFns:[]};var w=s("VU/8")(y,x,!1,function(t){s("9vc/")},null,null);e.default=w.exports},"9vc/":function(t,e,s){var a=s("WLO8");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);s("rjj0")("097d210a",a,!0)},Jnrq:function(t,e,s){(t.exports=s("FZ+f")(!1)).push([t.i,"\n.step2 {\n  background: #fff;padding: 10px;\n}\n.el-row {\n  margin-bottom: 10px;\n&:last-child {\n   margin-bottom: 0;\n}\n}\n.bg-purple-col {\n  padding-bottom: 10px;\n  background: #f8f8f8;\n}\n.col-content {\n  padding-top: 20px;\n  border-radius: 4px;\n}\n.spec-content {\n  padding-top: 10px;\n  padding-bottom: 5px;\n  border-radius: 4px;\n  min-height: 70px;\n  background: #fff;\n}\n.spec-row-content {\n  padding: 3px;\n  border-radius: 4px;\n  min-height: 10px;\n  background: #f8f8f8;\n}\n.el-input.is-disabled .el-input__inner{\n  color: #000000;\n}\n",""])},MOmO:function(t,e,s){t.exports=s.p+"static/img/401.089007e.gif"},WLO8:function(t,e,s){(t.exports=s("FZ+f")(!1)).push([t.i,"\n.bg-from {\n  background: #f8f8f8;\n}\n.from-content {\n  margin: 10px;\n  padding: 10px;\n  border-radius: 4px;\n  min-height: 100%;\n}\n",""])},WdJ0:function(t,e,s){var a=s("f10E");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);s("rjj0")("5018a660",a,!0)},eB4P:function(t,e,s){var a=s("Jnrq");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);s("rjj0")("13446cf4",a,!0)},f10E:function(t,e,s){(t.exports=s("FZ+f")(!1)).push([t.i,"\n.errPage-container[data-v-1bb323c8] {\n  width: 800px;\n  margin: 100px auto;\n}\n.errPage-container .text-jumbo[data-v-1bb323c8] {\n    font-size: 60px;\n    font-weight: 700;\n    color: #484848;\n}\n.errPage-container .list-unstyled[data-v-1bb323c8] {\n    font-size: 14px;\n}\n.errPage-container .list-unstyled li[data-v-1bb323c8] {\n      padding-bottom: 5px;\n}\n.errPage-container .list-unstyled a[data-v-1bb323c8] {\n      color: #008489;\n      text-decoration: none;\n}\n.errPage-container .list-unstyled a[data-v-1bb323c8]:hover {\n        text-decoration: underline;\n}\n",""])}});